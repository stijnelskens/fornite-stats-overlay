<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortnite Overlay</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>

    <div class="section section--default">
        <div class="container mx-auto">
            <div class="max-w-2xl">
                <h1 class="text-3xl font-bold text-gray-700 mb-4">Fortnite Overlay</h1>
                <label class="block uppercase tracking-wide text-gray-700 font-bold mb-2" for="textInput">Fornite Account ID</label>
                <input type="text" name="textInput" id="textInput" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500 mb-4" placeholder="id">
                <button type="submit" id="js-submit" class="shadow bg-blue-500 hover:bg-blue-700 focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">Submit</button>
                <div class="max-w-xl flex flex-wrap mt-8 -mx-4">
                    <div id="error-message" class="w-full bg-red-500 text-white p-4 mb-2" style="display: none;">Something went wrong</div>
                    <div class="w-1/3 px-4">
                        <div class="bg-yellow-400 p-4 text-center" style="clip-path: polygon(5% 0, 100% 0%, 96% 100%, 0% 100%);">
                            <strong>Wins</strong>
                            <div><span class="wins" id="wins"></span></div>
                        </div>
                    </div>
                    <div class="w-1/3 px-4">
                        <div class="bg-yellow-400 p-4 text-center" style="clip-path: polygon(5% 0, 100% 0%, 96% 100%, 0% 100%);">
                            <strong>Kills</strong>
                            <div><span class="kills" id="kills"></span></div>
                        </div>
                    </div>
                    <div class="w-1/3 px-4">
                        <div class="bg-yellow-400 p-4 text-center" style="clip-path: polygon(5% 0, 100% 0%, 96% 100%, 0% 100%);">
                            <strong>KD</strong>
                            <div><span class="kd" id="kd"></span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const submitButton = document.getElementById('js-submit');

        submitButton.addEventListener('click', function(){
            const input = document.getElementById('textInput');
            const inputValue = input.value;
            getStats(inputValue);
        });

        function getStats(inputValue) {
            axios.get(`https://fortnite-api.com/v1/stats/br/v2/${inputValue}`)
            .then(function (response) {
                // handle success
                console.log(response);

                const wins = document.getElementById('wins');
                const kills = document.getElementById('kills');
                const kd = document.getElementById('kd');

                wins.innerHTML = response.data.data.stats.all.overall.wins;
                kills.innerHTML = response.data.data.stats.all.overall.kills;
                kd.innerHTML = Math.round(response.data.data.stats.all.overall.kd * 100) / 100;

                document.getElementById('error-message').style.display = 'none';
            })
            .catch(function (error) {
                document.getElementById('error-message').style.display = 'block';
            })
            .then(function () {
                // always executed
                console.log('theennn');
        });
        }
    </script>
</body>
</html>